<%= render 'edit_common', context: :edit_articles %>

<div class="col-xs-12">
  <%= bootstrap_form_for(resource, as: resource_name, url: user_articles_path, html: { method: :put }, layout: :inline) do |f| %>
    <%= devise_error_messages! %>
    <div class="panel-group" id="accordeon">
      <% @rooms.each do |room| %>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3>
              <a data-toggle="collapse" data-parent="accordeon" href="#<%= underscore(room) %>"><%= room %></a>
            </h3>
          </div>

          <div id="<%= underscore(room) %>"  class="panel-collapse collapse">
            <div class="panel-body">

              <table class="table table-striped">
                <%= f.fields_for :articles, @articles[room], include_id: false do |articles_form| %>
                  <% article = articles_form.object %>
                  <%= render 'edit_article_fields', f: articles_form, article: article %>
                <% end %>
              </table>
              
            </div>
          </div>
        </div>
      <% end %>
      <%= f.submit t("Update") %>
    </div>
  <%= f.submit t("Update") %>
  <% end %>
</div>
  
<script> 
 $(document).ready(function(){
   $(".secondary_article_inputs").hide()
   
   $(".article_cb").click( function() {
     var thedivid = "#article_" + $(this).attr("data") + "_div";
     console.log(thedivid);
     $(thedivid).toggle(200);
   });
 });
 
</script>
