- @title = t('titles.articles.index')

- if is_admin?
  - @title += ' of ' + @user.nickname

.col-xs-12.col-sm-3.col-sm-push-9
  = tipp_panel do
    = render 'index_help'
    
.col-xs-12.col-sm-9.col-sm-pull-3
  %h3= @title
  %div{:class => "empty-list#{" to_hide" unless @articles.empty?}"}
    = t('.empty_list_message')
  - @articles.each do |article|
    = render 'article_owner', article: article
  .article_placeholder
  #article_null_div.article
    .row
      .col-xs-12.text-right
        = link_to("", "", class: "glyphicon glyphicon-plus mp-toggle-visibility", data: {toggle_target: "#article_new", toggle: "tooltip"}, title: t('.tooltip_add_button') )
    #article_new.row
      .col-xs-12
        = render 'form', article: Article.new

:javascript
  $(document).ready(function(){
  })

  var onCreateSuccess = function(article_id, stockitem_id, newText, formText, nstockitems, narticles) {
    // remove the empty-list div, if existend
    $(".empty-list").hide(200)
    
    console.log("within onCreateSuccess")
    // replace the form content (so no need to reset the form, right?)
    $("#new_article").replaceWith(formText)
                 
    // place the new content
    $(".article_placeholder").before(newText);

    // hide the rate field of the article form (just in case)
    // $('.article_rate_gratis').hide()
    
    // hide the new div
    $("#article_new").hide(200);

    // hide the generated edit div
    var div_id = "#article_" + article_id + "_div .article_edit"
    console.log(div_id);
    $(div_id).hide(200);

  };

  var onCreateError = function(article_id, stockitem_id, newText, formText, nstockitems){
    console.log("within onCreateError")

    // replace the form content (so no need to reset the form, right?)
    $("#new_article").replaceWith(formText)
    
  };
